# Campionamento e quantizzazione
Un segnale è una variazione di una grandezza fisica rispetto all'altra. In base a come varia ci dice qualcosa.
Il segnale può essere analogico, digitale e può essere descritto da una funzione. Se è continua, il segnale è continuo.

Come si memorizza un segnale? si prendono solo alcuni che rappresentano il segnale. Il processo di campionamento fa questa roba.
Quanti se ne devono prendere e quanti?

**ll campionamento è il processo: segnale tempo continuo -> segnale a tempo discreto**

>Passo da infiniti valori (realtà) a un numero finito di questi valori.

**Quantizzazione processo : segnale a valori continui -> a segnali a valori discreti**
Se un segnale è campionato e quantizzato si parla di **segnale digitale**

_Esempio_
![[Pasted image 20221110104122.png]]
i campioni scelti sono i quadratini bianchi. Si divide lo spazio e ogni tot si prende un campione.
A intervalli regolari assegno un valore e quindi faccio quantizzazione, quindi se due valori sono molto simili, allora diventano lo stesso (come se si arrotondasse).

_Altro esempio_
![[Pasted image 20221110104943.png]]

Si può campionare se c'è un numero di campioni sufficiente.
*a*) **Un campionamento troppo basso fa perdere dettagli ed informazioni**; sebbene grave una tale perdita è spesso una necessità: non possiamo conservare milioni di campioni e ci accontentiamo di perdere informazioni pur di tenere il database delle misure ottenute in dimensioni maneggevoli. 
*b*) **Un campionamento troppo basso può far apparire nella immagine dettagli NON PRESENTI nell’originale**. Il segnale viene “alterato” e cambiato in qualcosa di “altro”. Si parla di “**aliasing**”. L’aliasing è un fenomeno sottile ma poiché esso è imprevedibile richiede attenzione.

## Teorema di Shannon
Per scegliere il giusto valore di campionamento si ricorre al teorema.
>Il Nyquist rate è una caratteristica di un'audio, immagine ecc di qualunque cosa che varia nel tempo/spazio ecc ed è legato alle frequenze.
>Formalmente: Si definisce Nyquist rate la più alta frequenza in un segnale continuo e limitato.

>Ogni segnale può essere scomposto in armoniche (sinusoidali) di frequenza diversa.

![[Pasted image 20221110105757.png]]

Questo segnale può essere scritto come somma di sinusoidi, ognuna a frequenza diversa e il Nyquist rate è il doppio della la sinusoide con la frequenza più alta (cioè quella che ha più oscillazioni in un tempo limitato)

Quindi...
![[Pasted image 20221110110008.png]]
Quindi ho la somma di 4 sinusoidi. L'altezza della barra indica l'ampiezza della curva. (esempio curva blu)

_Esempio_:
Non daremo una definizione rigorosa ma una “operativa” in 1D. La generalizzazione a 2d è immediata. 
- Si osservi un fenomeno che si svolge in un intervallo a…b • Se il fenomeno è (approx) costante durante tutto l’intervallo, la frequenza di Nyquist è 1: il fenomeno si svolge in un unico ciclo. 
- Altrimenti si divide l’intervallo in 2 parti e si controlla per ciascun intervallino il fenomeno si mantiene (approx) costante (esso può però variare da intervallino ad intervallino). 
- Si procede in tal modo dividendo l’intervallo in 3, 4, … parti fino a trovare una suddivisione tale che entro ciascun intervallino il fenomeno sia in pratica costante.
Sia tale suddivisione in N parti. N si dice frequenza di Nyquist del fenomeno sull’intervallo osservato.
>Più è dettagliato ciò che voglio rappresentare, più intervalli devo creare.

Alte frequenze = aree con tante variazioni di valori, quindi tanti intervalli
Basse frequenze = il viceversa.

Dopo aver definito Nyquist rate è possibile tornare al teorema di Shannon:
Se si raccolgono campioni con frequenza più del doppio della frequenza di Nyquist (2N nel nostro caso) il segnale può essere ricostruito FEDELMENTE in ogni suo punto!
Numero di campioni = frequenza di campionamento = ogni quanto devo prendere dei campioni = non devo prendere troppi campioni sennò occupo più memoria = bastano Nyquist\*2

![[Pasted image 20221110113426.png]]

In quante parti posso suddividere un pezzo per rappresentare correttamente il pezzo? 720/4 e se divido per 4 allora 
suddivisioni che devo fare è 180.
![[Pasted image 20221110114434.png]]

I dettagli persi sono persi. I dettagli introdotti (nuovi dettagli che nell'originale non c'erano) viene detto **aliasing**. E quindi non viene soddisfatto il teorema di shannon. Se uso campioni piu piccoli del doppio del nequist rate allora avrò aliasing da qualche parte.

_Esempio 2_

![[Pasted image 20221110114657.png]]Perdo dei valori perchè fra due punti, in origine, c'era una frequenza più alta (oscillazioni)

![[Pasted image 20221110115142.png]]

![[Pasted image 20221110115156.png]]
- Nella realtà l’aliasing è sempre presente anche se in condizioni minime
- Esso viene introdotto quando si impone che il segnale sia limitato per essere campionato.
- L’aliasing può essere ridotto applicando una funzione di smussamento sul segnale originario prima del campionamento (antialiasing).

Filtro anti-aliasing rimuove dei dettagli prima di campionare cosi si abbassa il nequits rate. Si perde dettaglio ma non introduco aliasing.

Altri effetti aliasing: effetto Moirè. si sovrappongono pattern uguali con angolazione diversa: ![[Pasted image 20221110120120.png]]
![[Pasted image 20221110120639.png]]

[Aliasing nel tempo](https://www.youtube.com/results?search_query=wagon+wheel+aliasing)

# <font color = #FF0000 >QUANTIZZAZIONE </font>
I sensori sono analogici. Quando acquisiscono una grandezza, essi forniscono in uscita dei valori reali (perchè sono aparecchiature fisiche) quindi arrotondiamo i valori in modo che appartengono ad un insieme finito.
In più le misure sono sempre soggette a ERRORE a causa di difetti nel sensore o di perturbazioni termiche (“rumore”)
Quantizzare=approssimare=introduzione di errore.
Nei CCD anche a obiettivo chiuso ci sono correnti parassite che inducono rumore dentro il dispositivo elettronico dette “dark current"

Esecuzione: 
![[Pasted image 20221110121050.png]]
Esempio:
strumento legge valori fra [0,100] reali
scelgo $t_0 = 0 e t_1 = 30 t_2=50 t_3=100$
ho $t_0<t_1<t_2<t_3$
Ho 38,8 si trova fra t_1 e t_2 allora diventa il livello-> 1
ho 12,55 si trova fra t_0 e t_1 allora diventa il livello-> 0
Quindi assegno un livello.
e scelgo come assegnare i valori che trovo ad ogni livello. Tutti i valori in 1-> varranno 15. Tutti i valori in 2 varranno 40 ecc e tali valori sono arbitrari. In genere sono il valore di mezzo.
![[Pasted image 20221110121807.png]]
Un livello è quello che in origine era un insieme di valori. In origine erano diversi rispetto a quello che assegno. Quindi si introduce distorsione (incapacità di distinguere dettagli).
Esempio:
![[Pasted image 20221110121953.png]]

Tipi di quantizzazione: 
- uniforme, la scelta degli intervalli è uguale $t_{k+1} -t_k = C$ (costante)
- non uniforme se  $t_{k+1} -t_k \neq C$ 
![[Pasted image 20221110122126.png]]
Quantizzare di più i toni chiari(immagini), quantizzare più toni alti (audio) perchè a volume alto l'orecchio non distingue variazioni notevoli.
![[Pasted image 20221110122648.png]]
![[Pasted image 20221110122706.png]]
Tutto ciò che diventa un solo valore dopo la quantizzazione eccessiva non può mai tornare come in origine.
bit necessari per rappresentare N livelli.
ceil (log_2 N) = bit

L=vecchio livello di quantizzazione (voglio passare da n livelli al nuovo)
K=Numero di livello in uscita (K<N)
N=numero di livelli iniziali
![[Pasted image 20221110123510.png]]![[Pasted image 20221110123751.png]]
1. L=200 K=8 N=256
Si trovano dei valori decimali, pertanto prendiamo il floor oppure il ceil per assegnare il livello corretto _intero_
La uniforme è unica
la non uniforme non è unica perchè posso dividere un intervallo in infiniti modi
![[Pasted image 20221110124107.png]]
L'=f(L,N,K) in caso **GENERALE**.
Una possibile funzione può essere la seguente:
$L'= \frac {(log_2 (L)*K)}{log_2(N)}$

$L'_{00} = \frac{lg_2*L_{00}*8}{lg_2 256}$
In questo caso sono stato più accurato.
Nel primo caso, invece, 